<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Bang Universe with Messages</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            display: block;
        }
        #imageContainerTopLeft, #imageContainerTopRight {
            position: absolute;
            width: 100px;
            height: 100px;
            z-index: 10;
        }
        #imageContainerTopLeft {
            top: 5%; /* 5% margin from top */
            left: 5%; /* 5% margin from left */
        }
        #imageContainerTopRight {
            top: 5%; /* 5% margin from top */
            right: 5%; /* 5% margin from right */
        }
        #imageTopLeft, #imageTopRight {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <div id="imageContainerTopLeft">
        <img id="imageTopLeft" src="images/topleft.png" alt="Top Left Image">
    </div>
    <div id="imageContainerTopRight">
        <img id="imageTopRight" src="images/topright.jpg" alt="Top Right Image">
    </div>
    <script>
        let stars = [];
        let t = 0;
        let nebula;
        let roadGraphic;
        let messages = [
            "Science will never explain the infinite universe",
            "Explore the Vedic universe with Bhagavad Gita"
        ];
        let typedText = "";
        let charIndex = 0;
        let lastUpdate = 0;
        let typingSpeed = 75; // 50ms per character
        let messageDelay = 1000; // 1000ms (1 second) delay
        let cycleTime = 0;
        let isFirstMessage = true;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            nebula = createGraphics(width, height);
            roadGraphic = createGraphics(width, height);
            generateNebula();
            generateStars();
            generateRoad();
            textFont("Georgia"); // Spiritual and royal font
            textAlign(CENTER, CENTER);
            textSize(24);
        }

        function generateNebula() {
            nebula.loadPixels();
            for (let x = 0; x < nebula.width; x++) {
                for (let y = 0; y < nebula.height; y++) {
                    let n = noise(x * 0.01, y * 0.01) * 255;
                    let alpha = map(n, 0, 255, 0, 50);
                    nebula.set(x, y, color(100, 100, 200, alpha));
                }
            }
            nebula.updatePixels();
        }

        function generateStars() {
            stars = [];
            let minDim = min(width, height);
            for (let i = 0; i < 100; i++) {
                let angle = random(TWO_PI);
                let maxDist = random(100, minDim / 2);
                let size = random(2, 6);
                let twinkleSpeed = random(0.02, 0.05);
                stars.push({ angle, maxDist, size, twinkleSpeed });
            }
        }

        function generateRoad() {
            roadGraphic.clear();
            let initialWidth = width * 0.35;
            let finalWidth = initialWidth * 0.1;
            let numberLayers = 500;
            let segments = 50;
            let sx = 0;
            let sy = height;
            let cx1 = width * 0.4;
            let cy1 = height * 1.0;
            let cx2 = width * 0.6;
            let cy2 = height * 0.7;
            let ex = width;
            let ey = height * 0.5;
            roadGraphic.noFill();
            for (let i = 0; i < numberLayers; i++) {
                let fraction = i / (numberLayers - 1);
                let r = 255;
                let g = map(fraction, 0, 1, 255, 255);
                let b = map(fraction, 0, 1, 255, 150);
                let alpha = map(fraction, 0, 1, 50, 20);
                roadGraphic.stroke(r, g, b, alpha);
                roadGraphic.strokeWeight(1);
                roadGraphic.beginShape();
                for (let j = 0; j <= segments; j++) {
                    let t = j / segments;
                    let x = bezierPoint(sx, cx1, cx2, ex, t);
                    let y = bezierPoint(sy, cy1, cy2, ey, t);
                    let dx = bezierTangent(sx, cx1, cx2, ex, t);
                    let dy = bezierTangent(sy, cy1, cy2, ey, t);
                    let len = sqrt(dx * dx + dy * dy);
                    if (len === 0) len = 1;
                    let px = -dy / len;
                    let py = dx / len;
                    let halfW = map(t, 0, 1, initialWidth / 2, finalWidth / 2);
                    let offset = map(fraction, 0, 1, -halfW, halfW);
                    let offX = x + px * offset;
                    let offY = y + py * offset;
                    roadGraphic.vertex(offX, offY);
                }
                roadGraphic.endShape();
            }
        }

        function drawStar(x, y, radius, alpha) {
            noStroke();
            let glowLayers = 3;
            for (let i = glowLayers; i > 0; i--) {
                let glowRadius = radius * (1 + i * 0.5);
                let glowAlpha = alpha * (i / glowLayers) * 0.5;
                fill(255, 255, 255, glowAlpha);
                circle(x, y, glowRadius * 2);
            }
            fill(255, 255, 255, alpha);
            circle(x, y, radius * 2);
        }

        function drawSun(x, y, alpha) {
            let maxRadius = 50;
            let glowLayers = 20;
            for (let i = glowLayers; i > 0; i--) {
                let radius = (i / glowLayers) * maxRadius;
                let sunAlpha = map(i, 0, glowLayers, 0, alpha);
                fill(255, 200, 100, sunAlpha);
                circle(x, y, radius * 2);
            }
            fill(255, 220, 100, alpha);
            circle(x, y, 20);
        }

        function draw() {
            background(0);
            image(nebula, 0, 0);
            let centerX = width / 2;
            let centerY = height / 2;
            let radiusFactor = abs(sin(t));
            t += 0.01;
            let alpha = map(radiusFactor, 0, 1, 0, 200);
            drawSun(centerX, centerY, alpha);
            for (let star of stars) {
                let dist = star.maxDist * radiusFactor;
                let x = centerX + cos(star.angle) * dist;
                let y = centerY + sin(star.angle) * dist;
                let twinkle = sin(frameCount * star.twinkleSpeed) * 0.3 + 0.7;
                let starSize = star.size * twinkle;
                drawStar(x, y, starSize, alpha);
            }
            image(roadGraphic, 0, 0);

            // Typing effect with looping transition
            if (millis() - lastUpdate >= typingSpeed) {
                cycleTime = millis();
                if (isFirstMessage) {
                    if (charIndex < messages[0].length) {
                        typedText = messages[0].substring(0, charIndex + 1);
                        charIndex++;
                    } else {
                        isFirstMessage = false;
                        charIndex = 0;
                        typedText = "";
                        lastUpdate = millis();
                    }
                } else {
                    if (charIndex < messages[1].length) {
                        typedText = messages[1].substring(0, charIndex + 1);
                        charIndex++;
                    } else {
                        isFirstMessage = true;
                        charIndex = 0;
                        typedText = "";
                        lastUpdate = millis() + messageDelay; // 1-second delay before restarting
                    }
                }
                lastUpdate = millis();
            }

            // Spiritual and royal font effect for center message
            push();
            fill(255, 215, 0); // Golden-yellow color
            text(typedText, width / 2, height / 2);
            fill(0, 0, 0, 100); // Black shadow with opacity
            text(typedText, width / 2 + 2, height / 2 + 2);
            pop();

            // Static text at bottom right with right alignment
            push();
            textSize(18);
            let marginX = width * 0.02; // 2% of width as margin
            let marginY = height * 0.02; // 2% of height as margin
            textAlign(RIGHT, TOP); // Right-aligned text
            fill(255, 215, 0); // Golden-yellow color
            text("Speaker: Rajat Prabhu", width - marginX, height - marginY - 40); // Increased bottom margin
            fill(0, 0, 0, 100); // Black shadow
            text("Speaker: Rajat Prabhu", width - marginX - 2, height - marginY - 42);
            fill(255, 215, 0);
            text("ISKCON PUNE", width - marginX, height - marginY - 20); // Additional bottom margin
            fill(0, 0, 0, 100);
            text("ISKCON PUNE", width - marginX - 2, height - marginY - 22);
            pop();

            // Static text below top right image, center-aligned on two lines
            push();
            textSize(18);
            textAlign(CENTER, TOP); // Center-aligned text
            textStyle(BOLD); // Bold text
            let topRightX = width - (width * 0.05) - 50; // Center of 100px image at right: 5%
            let topRightY = height * 0.05 + 100 + 10; // Below image (5% of height + 100px height + 10px margin)
            fill(255); // White color
            text("REGISTER", topRightX, topRightY);
            text("AT", topRightX, topRightY + 20); // 20px spacing between lines
            fill(0, 0, 0, 100); // Black shadow
            text("REGISTER", topRightX - 2, topRightY + 2);
            text("AT", topRightX - 2, topRightY + 22);
            pop();
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            nebula = createGraphics(width, height);
            roadGraphic = createGraphics(width, height);
            generateNebula();
            generateStars();
            generateRoad();
        }
    </script>
</body>
</html>